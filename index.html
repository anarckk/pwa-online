<head>
  <title>Minimal PWA</title>
  <meta name="viewport" content="width=device-width, user-scalable=no" />
  <link rel="stylesheet" type="text/css" href="/pwa-online/main.css">
  <link rel="manifest" href="/pwa-online/manifest.json" />
  <link rel="shortcut icon" href="/pwa-online/favicon.ico">
</head>

<body>
  <h3>Hello Pwa</h3>
  <div class="main-text">Minimal PWA</div>
  <!-- service worker -->
  <script>
    // 判断浏览器是否支持 Service Worker
    if ('serviceWorker' in navigator) {
      // 在 load 事件触发后注册 Service Worker，确保 Service Worker 的注册不会影响首屏速度
      window.addEventListener('load', function () {
        // 注册 Service Worker
        navigator.serviceWorker.register('/pwa-online/sw.js').then(function (registration) {
          // 注册成功
          console.log('ServiceWorker registration successful with scope: ', registration.scope)
        }).catch(function (err) {
          // 注册失败 :(
          console.warn('ServiceWorker registration failed: ', err)
        })
      })
    }
  </script>
</body>
